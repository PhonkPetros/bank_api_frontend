import{d as g,e as h}from"./employeeApi-D5Bbbajn.js";import{_ as f,r as c,o as y,a as o,b as a,d as i,t as s,F as k,e as b,g as t}from"./index-DQsCC5S4.js";const C={class:"approval-queue"},A={key:0,class:"loading-message"},E={key:1,class:"error-message"},N={key:2,class:"no-customers-message"},F={key:3},x={class:"customers-table"},B=["onClick","disabled"],Q={key:0,class:"approval-error"},w={__name:"ApprovalQueue",setup(L){const n=c([]),d=c(!1),u=c(null),_=async()=>{var l,r;d.value=!0,u.value=null;try{const e=await g();n.value=e.data.map(v=>({...v,approving:!1,approvalError:null}))}catch(e){console.error("Failed to fetch unapproved customers:",e),u.value=((r=(l=e.response)==null?void 0:l.data)==null?void 0:r.message)||e.message||"An unexpected error occurred."}finally{d.value=!1}},m=async l=>{var e,v;const r=n.value.find(p=>p.id===l);if(r){r.approving=!0,r.approvalError=null;try{await h(l),n.value=n.value.filter(p=>p.id!==l)}catch(p){console.error(`Failed to approve customer ${l}:`,p),r.approvalError=((v=(e=p.response)==null?void 0:e.data)==null?void 0:v.message)||p.message||"Failed to approve customer."}finally{r.approving=!1}}};return y(()=>{_()}),(l,r)=>(t(),o("div",C,[r[1]||(r[1]=a("h2",null,"Customer Approval Queue",-1)),d.value?(t(),o("div",A," Loading unapproved customers... ")):i("",!0),u.value?(t(),o("div",E,s(u.value),1)):i("",!0),!d.value&&!u.value&&n.value.length===0?(t(),o("div",N," There are no customers currently pending approval. ")):i("",!0),!d.value&&!u.value&&n.value.length>0?(t(),o("div",F,[a("table",x,[r[0]||(r[0]=a("thead",null,[a("tr",null,[a("th",null,"Name"),a("th",null,"Email"),a("th",null,"BSN"),a("th",null,"Phone"),a("th",null,"Action")])],-1)),a("tbody",null,[(t(!0),o(k,null,b(n.value,e=>(t(),o("tr",{key:e.id},[a("td",null,s(e.firstName)+" "+s(e.lastName),1),a("td",null,s(e.email),1),a("td",null,s(e.bsn),1),a("td",null,s(e.phone),1),a("td",null,[a("button",{onClick:v=>m(e.id),disabled:e.approving,class:"approve-btn"},s(e.approving?"Approving...":"Approve"),9,B),e.approvalError?(t(),o("span",Q,s(e.approvalError),1)):i("",!0)])]))),128))])])])):i("",!0)]))}},V=f(w,[["__scopeId","data-v-164ef9d0"]]);export{V as default};
