import{_ as k,r as f,o as g,a as l,b as e,d as i,t as n,F as I,e as A,w as F,g as o,n as C,h as N}from"./index-DQsCC5S4.js";import{h as B}from"./employeeApi-D5Bbbajn.js";const D={class:"all-transfers-page"},w={key:0,class:"loading-message"},S={key:1,class:"error-message"},E={key:2,class:"transfers-table"},R=["title","onClick"],L=["title","onClick"],P={key:0},W=["title","onClick"],V={key:3,class:"no-transfers-message"},$={class:"expand-popup"},H={class:"popup-header"},M={class:"popup-title"},O={class:"popup-value"},z={__name:"AllTransfers",setup(j){const u=f(!0),r=f(""),p=f([]),c=f({visible:!1,value:"",label:""});function v(a,s){a&&(c.value={visible:!0,value:a,label:s})}function m(){c.value={visible:!1,value:"",label:""}}const h=async()=>{var a,s;u.value=!0,r.value="";try{const t=await B();p.value=t.data.sort((d,T)=>new Date(T.timestamp)-new Date(d.timestamp))}catch(t){r.value=((s=(a=t.response)==null?void 0:a.data)==null?void 0:s.message)||t.message||"Failed to load transfers."}finally{u.value=!1}};function y(a){if(a.transactionType==="DEPOSIT")return"amount-positive";if(a.transactionType==="WITHDRAWAL")return"amount-negative";if(a.transactionType==="TRANSFER"){if(a.fromIban)return"amount-negative";if(a.toIban)return"amount-positive"}return""}function _(a){if(a.transactionType==="DEPOSIT")return"+";if(a.transactionType==="WITHDRAWAL")return"-";if(a.transactionType==="TRANSFER"){if(a.fromIban)return"-";if(a.toIban)return"+"}return""}function b(a){return new Date(a).toLocaleString()}return g(()=>{h()}),(a,s)=>(o(),l("div",D,[s[1]||(s[1]=e("h2",null,"All Transfers",-1)),u.value?(o(),l("div",w,"Loading transfers...")):i("",!0),r.value?(o(),l("div",S,n(r.value),1)):i("",!0),!u.value&&!r.value&&p.value.length?(o(),l("table",E,[s[0]||(s[0]=e("thead",null,[e("tr",null,[e("th",null,"Date"),e("th",null,"From"),e("th",null,"To"),e("th",null,"Amount"),e("th",null,"Type"),e("th",null,"Initiated By")])],-1)),e("tbody",null,[(o(!0),l(I,null,A(p.value,t=>(o(),l("tr",{key:t.id},[e("td",null,n(b(t.timestamp)),1),e("td",null,[e("span",{class:"truncate clickable",title:t.fromIban,onClick:d=>v(t.fromIban,"From IBAN")},n(t.fromIban||"-"),9,R)]),e("td",null,[e("span",{class:"truncate clickable",title:t.toIban,onClick:d=>v(t.toIban,"To IBAN")},n(t.toIban||"-"),9,L)]),e("td",{class:C(y(t)+" amount-cell")},[_(t)?(o(),l("span",P,n(_(t)),1)):i("",!0),N(" €"+n(t.amount.toFixed(2)),1)],2),e("td",null,n(t.transactionType),1),e("td",null,[e("span",{class:"truncate clickable",title:t.initiatedByFullName,onClick:d=>v(t.initiatedByFullName,"Initiated By")},n(t.initiatedByFullName||"-"),9,W)])]))),128))])])):i("",!0),!u.value&&!r.value&&!p.value.length?(o(),l("div",V,"No transfers found.")):i("",!0),c.value.visible?(o(),l("div",{key:4,class:"expand-popup-overlay",onClick:F(m,["self"])},[e("div",$,[e("div",H,[e("span",M,n(c.value.label),1),e("button",{class:"popup-close",onClick:m},"×")]),e("div",O,n(c.value.value),1)])])):i("",!0)]))}},J=k(z,[["__scopeId","data-v-7c191432"]]);export{J as default};
